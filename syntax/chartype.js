'use strict';

var NorlitJSCompiler = require("../compiler");

/* Human-readable types */
var types = ["UNASSIGNED", "UPPERCASE_LETTER", "LOWERCASE_LETTER", "TITLECASE_LETTER", "MODIFIER_LETTER", "OTHER_LETTER", "NON_SPACING_MARK", "ENCLOSING_MARK", "COMBINING_SPACING_MARK", "DECIMAL_DIGIT_NUMBER", "LETTER_NUMBER", "OTHER_NUMBER", "SPACE_SEPARATOR", "LINE_SEPARATOR", "PARAGRAPH_SEPARATOR", "CONTROL", "FORMAT", "PRIVATE_USE", "SURROGATE", "DASH_PUNCTUATION", "START_PUNCTUATION", "END_PUNCTUATION", "CONNECTOR_PUNCTUATION", "OTHER_PUNCTUATION", "MATH_SYMBOL", "CURRENCY_SYMBOL", "MODIFIER_SYMBOL", "OTHER_SYMBOL", "INITIAL_QUOTE_PUNCTUATION", "FINAL_QUOTE_PUNCTUATION"];
/* Compressed types */
var compressedType = "0123456789ABCDEFGHIJKLMNOPQRST";
/* Map to store each character's type.
 * A string with length=1 means that 256 chars share same type,
 * while a string with length=256 indicates types for these 256 chars */
var map = ["FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFCNNNPNNNKLNONJNN9999999999NNOOONN11111111111111111111111111KNLQMQ22222222222222222222222222KOLOFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFCNPPPPRNQR5SOGRQROBBQ2NNQB5TBBBN11111111111111111111111O1111111222222222222222222222222O22222222", "1212121212121212121212121212121212121212121212121212121221212121212121212212121212121212121212121212121212121212121212121121212221121211211122111121121112221121121212112122121121112121122512225555132132132121212121212121221212121212121212122132121112121212", "12121212121212121212121212121212121212121212121212122222221121122121111212121212222222222222222222222222222222222222222222222222222222222222222222225222222222222222222222222222444444444444444444QQQQ444444444444QQQQQQQQQQQQQQ44444QQQQQQQ4Q4QQQQQQQQQQQQQQQQQ", "666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666612124Q12004222N00000QQ1N11101011211111111111111111011111111122222222222222222222222222222222222122111222121212121212121212121212222212O121122111", "1111111111111111111111111111111111111111111111112222222222222222222222222222222222222222222222221212121212121212121212121212121212R66666771212121212121212121212121212121212121212121212121212121121212121212122121212121212121212121212121212121212121212121212", "121212121212121212121212121212121212121200000000011111111111111111111111111111111111111004NNNNNN02222222222222222222222222222222222222220NJ0000P0666666666666666666666666666666666666666666666J6N66N66N60000000055555555555555555555555555500000555NN00000000000", "GGGGG0OOONNPNNRR66666666666N00NN55555555555555555555555555555555455555555556666666666666666666669999999999NNNN556555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555N56666666GR6666664466R6666559999999999555RR5", "NNNNNNNNNNNNNN0G56555555555555555555555555555555666666666666666666666666666005555555555555555555555555555555555555555555555555555555555555555555555555555555555555555566666666666500000000000000999999999955555555555555555555555555555555566666666644RNNN400000", "555555555555555555555566664666666666466646666600NNNNNNNNNNNNNNN0555555555555555555555555566600N00000000000000000000000000000000000000000000000000000000000000000505555555555500000000000000000000000000000000000000000000000000000006666666666666666666666666660", "6668555555555555555555555555555555555555555555555555555555686588866666666888868856666666555555555566NN9999999999N455555505555555068805555555500550055555555555555555555550555555505000555500658886666008800886500000000800005505556600999999999955PPBBBBBBRP0000", "066805555550000550055555555555555555555550555555505505505500608886600006600666000600000005555050000000999999999966555600000000000668055555555505550555555555555555555555505555555055055555006588866666066808860050000000000000005566009999999999NP00000000000000", "0688055555555005500555555555555555555555505555555055055555006586866660088008860000000068000055055566009999999999R5BBBBBB000000000065055555500055505555000550505500055000555000555555555555000088688000888088860050000008000000000000009999999999BBBRRRRRRPR00000", "088805555555505550555555555555555555555550555555555505555500056668888066606666000000066055000000556600999999999900000000BBBBBBBR00880555555550555055555555555555555555555055555555550555550065868888806880886600000008800000005055660099999999990550000000000000", "0088055555555055505555555555555555555555555555555555555555500588866660888088865000000008000000005566009999999999BBBBBB000R55555500880555555555555555555000555555555555555555555555055555555505005555555000600008886660608888888800000000000000000088N00000000000", "055555555555555555555555555555555555555555555555565566666660000P555555466666666N9999999999NN00000000000000000000000000000000000005505005505005000000555505555555055505050055055556556666660665005555504066666600999999999900555500000000000000000000000000000000", "5RRRNNNNNNNNNNNNNNNRNRRR66RRRRRR9999999999BBBBBBBBBBR6R6R6KLKL88555555550555555555555555555555555555555555555000066666666666666866666N66555556666666666606666666666666666666666666666666666660RRRRRRRR6RRRRRR0RRNNNNNRRRRNN0000000000000000000000000000000000000", "55555555555555555555555555555555555555555558866668666666866886659999999999NNNNNN555555886655556665888558888888555666655555555555556886688888865899999999998886RR1111111111111111111111111111111111111101000001005555555555555555555555555555555555555555555N4555", "5", "5555555555555555555555555555555555555555555555555555555555555555555555555055550055555550505555005555555555555555555555555555555555555555505555005555555555555555555555555555555550555500555555505055550055555555555555505555555555555555555555555555555555555555", "555555555555555550555500555555555555555555555555555555555555555555555555555555555555555555500666NNNNNNNNNBBBBBBBBBBBBBBBBBBBB0005555555555555555RRRRRRRRRR000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555500000000000", "J555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555", "5", "5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555NN55555555555555555C55555555555555555555555555KL000555555555555555555555555555555555555555555555555555555555555555555555555555NNNAAA000000000000000", "55555555555550555566600000000000555555555555555555666NN0000000005555555555555555556600000000000055555555555550555066000000000000555555555555555555555555555555555555555555555555555566866666668888888868866666666666NNN4NNNP56009999999999000000BBBBBBBBBB000000", "NNNNNNJNNNN666C0999999999900000055555555555555555555555555555555555455555555555555555555555555555555555555555555555555550000000055555555555555555555555555555555555555555650000055555555555555555555555555555555555555555555555555555555555555555555550000000000", "5555555555555555555555555555500066688886688800008868888886660000R000NN9999999999555555555555555555555555555555005555500000000000555555555555555555555555555555555555555555550000888888888888888885555555880000009999999999B000RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR", "555555555555555555555556688800NN55555555555555555555555555555555555555555555555555555868666666606868866666666888888666666666600699999999990000009999999999000000NNNNNNN4NNNNNN0000000000000000000000000000000000000000000000000000000000000000000000000000000000", "666685555555555555555555555555555555555555555555555568666668688888688555555500009999999999NNNNNNNRRRRRRRRRR666666666RRRRRRRRR0006685555555555555555555555555555558666688668688559999999999555555555555555555555555555555555555555555556866888686668800000000NNNN", "55555555555555555555555555555555555588888888666666668866000NNNNN99999999990005559999999999555555555555555555555555555555444444NN0000000000000000000000000000000000000000000000000000000000000000NNNNNNNN00000000666N66666666666668666666655556555588655000000000", "2222222222222222222222222222222222222222222244444444444444444444444444444444444444444444444444444444444444422222222222224222222222222222222222222222222222244444444444444444444444444444444444446666666666666666666666666666666666666660000000000000000000006666", "1212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212122222222212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212", "222222221111111122222200111111002222222211111111222222221111111122222200111111002222222201010101222222221111111122222222222222002222222233333333222222223333333322222222333333332222202211113Q2QQQ22202211113QQQ2222002211110QQQ2222222211111QQQ0022202211113QQ0", "CCCCCCCCCCCGGGGGJJJJJJNNSTKSSTKSNNNNNNNNDEGGGGGCNNNNNNNNNSTNNNNMMNNNOKLNNNNNNNNNNNONMNNNNNNNNNNCGGGGG00000GGGGGGB400BBBBBBOOOKL4BBBBBBBBBBOOOKL04444444444444000PPPPPPPPPPPPPPPPPPPPPPPPPPP000000000000000000000666666666666677776777666666666666000000000000000", "RR1RRRR1RR2111221112R1RRO11111RRRRRR1R1R1R1111R21111255552RR2211OOOOO12222RORR2RBBBBBBBBBBBBBBBBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA12AAAAB000000OOOOORRRRROORRRRORRORRORRRRRRRORRRRRRRRRRRRRRRRRRRRRRRRRRRRRRROORRORORRRRRRRRRRRRRRRRRRRRRRRRRRRRRRROOOOOOOOOOOO", "O", "RRRRRRRROOOORRRRRRRRRRRRRRRRRRRROORRRRRRRKLRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRORRRRRRRRRRRRRRRRRRRRRRRRRRRRRROOOOOOOOOOOOOOOOOOOOOOOOORRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRROOOOOORRRRRRRRRRRRRRRRRR000000000000", "RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR0000000000000000000000000RRRRRRRRRRR000000000000000000000BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRBBBBBBBBBBBBBBBBBBBBBB", "RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRORRRRRRRRRORRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRROOOOOOOO", "RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRORRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR", "0RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRKLKLKLKLKLKLKLBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRROOOOOKLOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOKLKLKLKLKLOOOOOOOOOOOOOOOO", "R", "OOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOKLKLKLKLKLKLKLKLKLKLKLOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOKLKLOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOKLOO", "O", "RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRROOOOOOOOOOOOOOOOOOOOORROOOOOO000RRRRRRRRRR0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "1111111111111111111111111111111111111111111111102222222222222222222222222222222222222222222222201211122121212111121221222222441112121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212122RRRRRR12126661200000NNNNBNN", "2222222222222222222222222222222222222202000002005555555555555555555555555555555555555555555555555555555500000004N00000000000000655555555555555555555555000000000555555505555555055555550555555505555555055555550555555505555555066666666666666666666666666666666", "NNSTSTNNNSTNSTNNNNNNNNNJNNJNSTNNSTKLKLKLKLNNNNN4NNNNNNNNNNJJ00000000000000000000000000000000000000000000000000000000000000000000RRRRRRRRRRRRRRRRRRRRRRRRRR0RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR000000000000", "RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR00000000000000000000000000RRRRRRRRRRRR0000", "CNNNR45AKLKLKLKLKLRRKLKLKLKLJKLLRAAAAAAAAA666688J44444RRAAA45NRR0555555555555555555555555555555555555555555555555555555555555555555555555555555555555550066QQ445J555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555N4445", "000005555555555555555555555555555555555555555500055555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555550RRBBBBRRRRRRRRRR55555555555555555555555555500000RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR0000000000005555555555555555", "RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR0BBBBBBBBBBRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRBBBBBBBBRBBBBBBBBBBBBBBBRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRBBBBBBBBBBRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRBBBBBBBBBBBBBBBRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR0", "R", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555550000000000RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555000000000000000000000000000000000000000000000000000", "5555555555555555555554555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555", "5", "5", "5", "555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555000RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR0000000005555555555555555555555555555555555555555444444NN", "5", "5555555555554NNN555555555555555599999999995500000000000000000000121212121212121212121212121212121212121212121256777N6666666666N4121212121212121212121212000000065555555555555555555555555555555555555555555555555555555555555555555555AAAAAAAAAA66NNNNNN00000000", "QQQQQQQQQQQQQQQQQQQQQQQ444444444QQ1212121212121222121212121212121212121212121212121212121212121212121212121212124222222221212112121212124QQ121201212000000000000121212121210000000000000000000000000000000000000000000000000000000000000000000000000000044255555", "5565556555565555555555555555555555588668RRRR0000BBBBBBRRPR0000005555555555555555555555555555555555555555555555555555NNNN00000000885555555555555555555555555555555555555555555555555588888888888888886000000000NN9999999999000000666666666666666666555555NNN50000", "9999999999555555555555555555555555555566666666NN55555555555555555555555666666666668800000000000N5555555555555555555555555555500066685555555555555555555555555555555555555555555555568866668868888NNNNNNNNNNNNN0499999999990000NN00000000000000000000000000000000", "55555555555555555555555555555555555555555666666886688660000000005556555555556800999999999900NNNN55555555555555554555555RRR5800005555555555555555555555555555555555555555555555556566655665555566565000000000000000000000000554NN5555555555586688NN54486000000000", "0555555005555550055555500000000055555550555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555555555555555555555555555555555588688688N86009999999999000000", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5", "5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555500000000000055555555555555555555555000055555555555555555555555555555555555555555555555550000", "I", "I", "I", "I", "I", "I", "I", "I", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "H", "5", "5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555500555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555500000000000000000000000000000000000000", "22222220000000000002222200000565555555555O5555555555555055555050550550555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555QQQQQQQQQQQQQQQQ00000000000000000555555555555555555555555555555555555555555555", "5", "55555555555555555555555555555555555555555555555555555555555555KL00000000000000005555555555555555555555555555555555555555555555555555555555555555005555555555555555555555555555555555555555555555555555550000000000000000000000000000000000000000555555555555PR00", "6666666666666666NNNNNNNKLN0000006666666000000000NJJMMKLKLKLKLKLKLKLKLNNKLNNNNMMMNNN0NNNNJKLKLKLNNNOJOOO0NPNN000055555055555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555500G", "0NNNPNNNKLNONJNN9999999999NNOOONN11111111111111111111111111KNLQMQ22222222222222222222222222KOLOKLNKLNN55555555554555555555555555555555555555555555555555555555445555555555555555555555555555555000555555005555550055555500555000PPOQRPP0ROOOORR0000000000GGGRR00"];

/* Get human-readable types from compressed types */
function decompressType(n) {
	return types[compressedType.indexOf(n)];
}

/* Get compressed type from a char */
function getCompressedType(c) {
	var ch = c.charCodeAt(0);
	var pageMap = map[ch >> 8];
	if (pageMap.length == 1) {
		return pageMap;
	}
	return pageMap[ch & 0xFF];
}

/* Public API : Get type of given character */
NorlitJSCompiler.CharType = function(c) {
	return decompressType(getCompressedType(c));
};